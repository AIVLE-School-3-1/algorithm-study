import sys
# 앞에 [y, x]
block = [
    [[0,1],[0,2],[0,3]],
    [[1,0],[2,0],[3,0]],

    [[1,0],[2,0],[2,1]],
    [[1,0],[0,1],[0,2]],
    [[0,1],[1,1],[2,1]],
    [[0,1],[0,2],[-1,2]],
    [[0,1],[-1,1],[-2,1]],
    [[0,1],[0,2],[1,2]],
    [[1,0],[2,0],[0,1]],
    [[1,0],[1,1],[1,2]],

    [[1,0],[1,1],[2,1]],
    [[0,1],[-1,1],[-1,2]],
    [[1,0],[0,1],[-1,1]],
    [[0,1],[1,1],[1,2]],

    [[0,1],[0,2],[1,1]],
    [[0,1],[0,2],[-1,1]],
    [[0,1],[1,1],[-1,1]],
    [[1,0],[2,0],[1,1]],
    
    [[0,1],[1,0],[1,1]]
]

n, m = map(int, sys.stdin.readline().split())

li = [list(map(int, sys.stdin.readline().split())) for _ in range(n)]

ans = 0

# 시간 복잡도: O(n * m * 19 * 3) -> 상수시간은 제외: O(n * m)
#
for i in range(n):
    for j in range(m):
        for k in range(19):
            s = li[i][j]
            for z in range(3):
                x = i + block[k][z][0]
                y = j + block[k][z][1]
                if 0 <= x < n and 0 <= y < m:
                    s += li[x][y]
            ans = max(ans, s)

print(ans)